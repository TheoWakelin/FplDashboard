<div class="team-fixtures-card">
  <div class="card-header">
    <span class="subheader">Team Fixtures</span>
  </div>
  <div class="card-content">
    @if (isLoading) {
      <app-loading-spinner></app-loading-spinner>
    }
    @if (error) {
      <div class="error-state">
        <span class="error-icon">&#9888;</span>
        <span>{{ error }}</span>
      </div>
    }
    @if (!isLoading && !error && teamFixtures.length === 0) {
      <div class="no-data">
        <span class="info-icon">&#9432;</span>
        <p>No team fixtures available</p>
      </div>
    }
    @if (!isLoading && !error && teamFixtures.length > 0) {
      <div class="table-wrapper">
        <table class="team-fixtures-table">
          <thead>
            <tr>
              <th>Team Name</th>
              <th>Attacking Score</th>
              <th>Defensive Score</th>
              <th>Overall Score</th>
              @for (gw of gameWeeks; track gw) {
                <th>GW {{ gw }}</th>
              }
            </tr>
          </thead>
          <tbody>
            @for (team of teamFixtures; track team.teamName) {
              <tr>
                <td>{{ team.teamName }}</td>
                <td>{{ team.totalAttackingStrength }}</td>
                <td>{{ team.totalDefensiveStrength }}</td>
                <td>{{ team.cumulativeStrength }}</td>
                @for (gw of gameWeeks; track gw) {
                  <td>
                    @if (getFixtureForGameWeek(team, gw)) {
                      <div class="fixture-chip-wrapper">
                        <div class="fixture-opponent-name">
                          <strong>{{ getFixtureForGameWeek(team, gw)?.opponentName }}</strong>
                        </div>
                        <span class="chip {{ getOpponentDifficultyClass(getFixtureForGameWeek(team, gw)!) }}">
                          Attack: {{ getFixtureForGameWeek(team, gw)?.attackingStrength }}
                        </span>
                        <span class="chip {{ getOpponentDifficultyClass(getFixtureForGameWeek(team, gw)!) }}">
                          Defence: {{ getFixtureForGameWeek(team, gw)?.defensiveStrength }}
                        </span>
                      </div>
                    }
                  </td>
                }
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
</div>
